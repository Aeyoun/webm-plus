<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>YouTube WebM Plus options</title>
    <link href="gfx/favicon.png" rel="icon" />
    <link href="gfx/options-page.css" rel="stylesheet" media="all" />
  </head>
  <body>
    <section>
      <h1>YouTube WebM Plus options</h1>
      <form>
        <fieldset>
          <div>
            <input type="checkbox" id="continueTesting"/>
            <label for="continueTesting">Rejoin the YouTube HTML5 Trial automatically</label>
          </div>
          <div>
            <input type="checkbox" id="videoSaveButton"/>
            <label for="videoSaveButton">Add a ‘Download Video’ button below all WebM videos</label>
          </div>
          <div>
            <input type="checkbox" id="filterSearch" />
            <label for="filterSearch">Filter search result to WebM videos only</label>
          </div>
        </fieldset>
        <fieldset>
          <div>
            <input type="checkbox" id="hideFlashPromo"/>
            <label for="hideFlashPromo">Hide promotions for Adobe Flash</label></label>
          </div>
          <div>
            <input type="checkbox" id="hideFlashUpgrade"/>
            <label for="hideFlashUpgrade">Hide upgrade warnings for Adobe Flash</label></label>
          </div>
          <div>
            <input type="checkbox" id="preventFlash" />
            <label for="preventFlash">Prevent all video playback using the Adobe Flash plug-in</label>
          </div>
        </fieldset>
        <div>
          <div>
          <input type="button" value="Done" onclick="window.close();" />
          </div>
        </div>
      </form>
    </section>
    <script>
var continueTesting = document.getElementById('continueTesting'),
  videoSaveButton = document.getElementById('videoSaveButton'),
  hideFlashPromo = document.getElementById('hideFlashPromo'),
  hideFlashUpgrade = document.getElementById('hideFlashUpgrade'),
  filterSearch = document.getElementById('filterSearch'),
  preventFlash = document.getElementById('preventFlash');

continueTesting.addEventListener('change', function() {
  widget.preferences.continueTesting = ((this.checked) ? 'true' : 'false');
}, false );
videoSaveButton.addEventListener('change', function() {
  widget.preferences.videoSaveButton = ((this.checked) ? 'true' : 'false');
}, false );
filterSearch.addEventListener('change', function() {
  widget.preferences.filterSearch = ((this.checked) ? 'true' : 'false');
}, false );
hideFlashPromo.addEventListener('change', function() {
  widget.preferences.hideFlashPromo = ((this.checked) ? 'true' : 'false');
}, false );
hideFlashUpgrade.addEventListener('change', function() {
  widget.preferences.hideFlashUpgrade = ((this.checked) ? 'true' : 'false');
}, false );
preventFlash.addEventListener('change', function() {
  widget.preferences.preventFlash = ((this.checked) ? 'true' : 'false');
  if (this.checked)
  {
    hideFlashUpgrade.checked = true;
    hideFlashUpgrade.disabled = true;
    widget.preferences.hideFlashUpgrade = 'true';
  }
  else {
    hideFlashUpgrade.disabled = false;
  }
}, false );

if (widget.preferences.continueTesting) continueTesting.checked = ((widget.preferences.continueTesting == 'true') ? true : false);
if (widget.preferences.videoSaveButton) videoSaveButton.checked = ((widget.preferences.videoSaveButton == 'true') ? true : false);
if (widget.preferences.filterSearch) filterSearch.checked = ((widget.preferences.filterSearch == 'true') ? true : false);
if (widget.preferences.hideFlashPromo) hideFlashPromo.checked = ((widget.preferences.hideFlashPromo == 'true') ? true : false);
if (widget.preferences.hideFlashUpgrade)
{
  hideFlashUpgrade.checked = ((widget.preferences.hideFlashUpgrade == 'true') ? true : false);
  hideFlashUpgrade.disabled  = ((widget.preferences.preventFlash == 'true') ? true : false)
}
if (widget.preferences.preventFlash) preventFlash.checked = ((widget.preferences.preventFlash == 'true') ? true : false);
    </script>
  </body>
</html>
